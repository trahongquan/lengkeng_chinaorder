<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Add new Brand or Category</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Phone</title>
    <!-- Link to Bootstrap CSS for styling -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/image-popup.css" type="text/css"> <!-- image-popup upload-->
</head>
<body>
<!--<div th:replace="admin/headerAdmin :: header-admin"></div>-->
<suplier>
    <h1 style="text-align: center" class="text-uppercase font-weight-bold"> Danh mục BannerTop
        <a th:href="'#'" >
            <img src="/images/download.png" alt="Tải xuống" style="max-width: 2%" >
        </a>
    </h1>
        <form th:action="'/Lengkeng/admin/bannertop/add'" method="post" id="formSupplier" enctype="multipart/form-data"
              class="form-group d-flex justify-content-center align-content-center flex-column">
            <div class="row d-flex justify-content-center align-content-center">
                <input type="hidden" name="username" th:value="${#authentication.name}">
                <input type="hidden" name="id" id="id" th:value="0">
                <div class="col-3">
                    <label for="title" >Tiêu đề:</label>
                    <input type="text" class="form-control imageBanner" id="title" name="title" placeholder="VD: Winter collection" required>
                </div>
                <div class="col-3">
                    <label for="subtitle" >Tiêu đề 2:</label>
                    <input type="text" class="form-control imageBanner" id="subtitle" name="subtitle" placeholder="VD: UNIQ SS24" required>
                </div>
                <div class="col-3">
                    <label for="buttonText" >Nút bấm chữ:</label>
                    <input type="text" class="form-control imageBanner" id="buttonText" name="buttonText" placeholder="VD: Go to shopping" required>
                </div>
                <div class="col-3">
                    <label for="active" >Trạng thái:</label>
                    <select name="active" id="active" class="form-control imageBanner">
                        <option value="1">Sử dụng</option>
                        <option value="0">Không sử dụng</option>
                    </select>
                </div>
            </div>
            <div>
                <!-- Quản lý Thêm hình ảnh -->
                <div class="container" id="addImage" >
                    <div class="rounded bg-white mx-auto pb-1">
                            <div class="upload_container mx-auto p-3 position-relative overflow-auto"
                                 ondrop="dropHandler(event);" ondragover="dragOverHandler(event);" ondragleave="dragLeaveHandler(event);" ondragenter="dragEnterHandler(event);">
                                <div class="uploadBox d-flex justify-content-center align-items-center flex-column">
                                    <p> Nhấn vào để chọn một ảnh</p>
                                    <input type="file" id="hidden-input" name="file" class="hidden">
                                    <button type="button" id="button" class="border-0">Tải lên ảnh</button>
                                </div>
                                <h5>Danh sách chọn</h5>
                                <ul id="gallery" class="list-unstyled flex-wrap d-flex">
                                    <li id="empty" class="itemHeight d-flex justify-content-center align-items-center flex-column">
                                        <img class="d-flex mx-auto emptyImage" src="https://user-images.githubusercontent.com/507615/54591670-ac0a0180-4a65-11e9-846c-e55ffce0fe7b.png" alt="no data">
                                        <span>Chưa có hình ảnh nào</span>
                                    </li>
                                </ul>
                                <div id="overlay" class="dropFile w-100 h-100 position-absolute pointer-events-none flex">
                                    <div class="overlayIcon">
                                        <i>
                                            <svg class="fill-current w-12 h-12 mb-3 text-blue-700" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                                <path d="M19.479 10.092c-.212-3.951-3.473-7.092-7.479-7.092-4.005 0-7.267 3.141-7.479 7.092-2.57.463-4.521 2.706-4.521 5.408 0 3.037 2.463 5.5 5.5 5.5h13c3.037 0 5.5-2.463 5.5-5.5 0-2.702-1.951-4.945-4.521-5.408zm-7.479-1.092l4 4h-3v4h-2v-4h-3l4-4z" />
                                            </svg>
                                        </i>
                                        <p class="text-lg text-blue-700">Drop files to upload</p>
                                    </div>
                                </div>
                            </div>
                            <div class="btnGroup d-flex justify-content-end my-3">
                            </div>
                    </div>
                </div>
                <template id="image-template">
                    <li class="itemHeight d-flex p-1 col-sm-2 col-1">
                        <article tabindex="0" class="group hasImage w-100 rounded  cursor-pointer position-relative">
                            <img alt="upload preview" class="img-preview imgSize rounded position-absolute" />
                            <section class="d-flex flex-column rounded w-100 h-100 position-absolute image-detail">
                                <h7 class="flex-1 text-center position-absolute left-5 top-0"></h7>
                                <div class="d-flex justify-content-center align-items-center">
                <span class="p-1 position-absolute left-0 bottom-0">
                  <i>
                    <svg class="fill-current imgSize1 ml-auto pt-" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#FFF">
                      <path d="M5 8.5c0-.828.672-1.5 1.5-1.5s1.5.672 1.5 1.5c0 .829-.672 1.5-1.5 1.5s-1.5-.671-1.5-1.5zm9 .5l-2.519 4-2.481-1.96-4 5.96h14l-5-8zm8-4v14h-20v-14h20zm2-2h-24v18h24v-18z" />
                    </svg>
                  </i>
                  <p class="m-0 size d-inline"></p>
                </span>
                                    <button class="delete ml-auto p-1 rounded position-absolute right-0 bottom-0 bg-transparent">
                                        <svg class="pointer-events-none imgSize2 ml-auto" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#FFF">
                                            <path class="pointer-events-none" d="M3 6l3 18h12l3-18h-18zm19-4v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.316c0 .901.73 2 1.631 2h5.711z" />
                                        </svg>
                                    </button>
                                </div>
                            </section>
                        </article>
                    </li>
                </template>
                <template id="file-template">
                    <li class="itemHeight d-flex p-1">
                        <article tabindex="0" class="group w-100 h-100 rounded position-relative">
                            <img alt="upload preview" class="img-preview imgSize hidden w-100 h-100 rounded" />
                            <section class="d-flex flex-column rounded w-100 h-100 position-relative py-2 px-3">
                                <h7 class="flex-1 text-center left-5 top-0"></h7>
                                <div class="d-flex justify-content-center align-items-center">
                        <span class="p-1 position-absolute left-0 bottom-0">
                            <i>
                                <svg class="fill-current imgSize1 ml-auto pt-1" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                    <path d="M15 2v5h5v15h-16v-20h11zm1-2h-14v24h20v-18l-6-6z" />
                                </svg>
                            </i>
                            <p class="m-0 size d-inline"></p>
                        </span>
                                    <button class="delete p-1 rounded ml-auto position-absolute right-5 bottom-0">
                                        <svg class="pointer-events-none fill-current imgSize1 ml-auto" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                            <path class="pointer-events-none" d="M3 6l3 18h12l3-18h-18zm19-4v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.316c0 .901.73 2 1.631 2h5.711z" />
                                        </svg>
                                    </button>
                                </div>
                            </section>
                        </article>
                    </li>
                </template>
            </div>
            <div class="row justify-content-around">
                <button type="submit" id="btnSubmit" class="col-3 btn btn-primary mt-2"> Thêm mới</button>
                <button type="button" id="cancel" class="col-3 mx-3">Hủy</button>
            </div>
            <p class="text-warning mt-2 btn" id="warning">Chú ý: Click lại nút sửa một lần nữa để hủy chế độ sửa</p>
        </form>
    <br>
    <div class="main-card mb-3 card">
        <div class="card-body">
            <table style="width: 100%;" id="example" class="table table-hover table-striped table-bordered">
                <thead>
                <tr>
                    <th>STT</th>
                    <th>Loại</th>
                    <th>Tiêu đề</th>
                    <th>Tiêu đề 2</th>
                    <th>Nút bấm chữ</th>
                    <th>Trang thái</th>
                    <th>Hình ảnh</th>
                    <th>Thao tác</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="imageBanner, iter : ${imageBanners}">
                    <td th:text="${iter.index + 1}"></td>
                    <td th:text="${imageBanner.type}"></td>
                    <td th:text="${imageBanner.title}"></td>
                    <td th:text="${imageBanner.subtitle}"></td>
                    <td th:text="${imageBanner.buttonText}"></td>
                    <td >
                        <span th:if="${imageBanner.active == 0}"> ❌</span>
                        <span th:if="${imageBanner.active == 1}"> ✅</span>
                    </td>
                    <td class="align-middle">
                        <img th:src="${domain + imageBanner.imgurl}" alt="banner" class="img-fluid">
                    </td>
                    <td class="d-flex flex-row justify-content-center align-content-center">
                        <button type="button" class="form-control btn btn-primary btn-edit m-1"
                                th:data-id="${imageBanner.id}"
                        >Sửa</button>
                        <a type="button" class="form-control btn btn-danger m-1" th:href="'/Lengkeng/admin/bannertop/del/'+${imageBanner.id}"
                        >Xóa</a>
                    </td>
                    <!--<td th:unless="${role.role == rolesNotRoleSystem[iter.index].role}" th:text="'Quyền nười dùng thêm'"></td>-->
                </tr>
                </tbody>
                <tfoot>
                <tr>
                    <th>STT</th>
                    <th>Loại</th>
                    <th>Tiêu đề</th>
                    <th>Tiêu đề 2</th>
                    <th>Nút bấm chữ</th>
                    <th>Trang thái</th>
                    <th>Hình ảnh</th>
                    <th>Thao tác</th>
                </tr>
                </tfoot>
            </table>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="/js/product/image-popup.js" type="application/javascript"></script> <!-- image-popup upload-->

    <!--<script src="/js/popup.js"></script>-->
    <script th:inline="javascript">
        var inputs = $('.imageBanner');
        $(document).ready(function () {
            var imageBanners = [[${imageBanners}]];
            $('#warning').hide();
            $('.btn-edit').click(function() {
                var imageBanner_id = $(this).attr('data-id');
                var imageBanner = $.grep(imageBanners, function(imageBanner1) {
                    return imageBanner1.id == imageBanner_id;
                });
                console.log(imageBanner[0]);


                if($('#id').val()==imageBanner_id){
                    $('#id').val(0);
                    $('#title').val("");
                    $('#subtitle').val("");
                    $('#buttonText').val("");
                    $('#active').prop('selectedIndex', 0);
                    $('#btnSubmit').text('Thêm mới');
                    inputs.each(function() {
                        $(this).removeClass('font-weight-bold')
                    })
                    $('#warning').hide()
                    $('#addImage').show()
                    $('#cancel').show()
                } else {
                    // Populate the input and select fields with lesson information
                    $('#id').val(imageBanner[0].id);
                    $('#title').val(imageBanner[0].title);
                    $('#subtitle').val(imageBanner[0].subtitle);
                    $('#buttonText').val(imageBanner[0].buttonText);
                    $('#active').val(imageBanner[0].active);
                    $('#btnSubmit').text('Sửa');
                    inputs.each(function() {
                        $(this).addClass('font-weight-bold')
                    })
                    $('#warning').show();
                    $('#addImage').hide()
                    $('#cancel').hide()
                }

            })
        })
    </script>
</suplier>
</body>
</html>